<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Jenkins 插件镜像 配置方法</title>
      <link href="/2020/02/24/jenkins-cha-jian-jing-xiang-pei-zhi-fang-fa/"/>
      <url>/2020/02/24/jenkins-cha-jian-jing-xiang-pei-zhi-fang-fa/</url>
      
        <content type="html"><![CDATA[<p>网上有大量的如果加速Jenkins插件安装的博客帖子，怀疑大部分都没有自己验证过，抄来抄去。</p><p>实际真正的步骤应该是：</p><p>基础发行版是Ubuntu 20.04</p><pre><code>$ wget -q -O - https://pkg.jenkins.io/debian/jenkins-ci.org.key | sudo apt-key add -$ sudo sh -c &#39;echo deb http://pkg.jenkins.io/debian-stable binary/ &gt; /etc/apt/sources.list.d/jenkins.list&#39;$ sudo apt-get update$ sudo apt-get install openjdk-8-jre$ sudo apt-get install jenkins</code></pre><p>默认系统里没有JDK/JRE</p><p>然后修改hudson.model.UpdateCenter.xml</p><pre><code>$ cd /var/lib/jenkins/$ vim hudson.model.UpdateCenter.xml</code></pre><p>替换原来update-center.json那一行为<a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></p><p>然后在浏览器里访问localhost:8080，假设没有修改默认端口8080。然后用 /var/lib/jenkins/secrets/initAdminPassword里的密码登陆，需要用root账号看initAdminPassword里的内容。</p><p>然后在选择安装默认插件还是自选插件的界面，不要点，切换到terminal，修改updates目录里的default.json，注意之前是没有updates这个目录的。</p><pre><code>$ sed -i &#39;s/http:\/\/updates.jenkins-ci.org\/download/https:\/\/mirrors.tuna.tsinghua.edu.cn\/jenkins/g&#39; default.json &amp;&amp; sed -i &#39;s/http:\/\/www.google.com/https:\/\/www.baidu.com/g&#39; default.json</code></pre><p>然后重启jenkins：</p><pre><code>$ sudo service jenkins restart</code></pre><p>然后在浏览器里再刷新localhost:8080，然后再安装插件，这个时候就刷刷的快了。</p><p>其他发行版或者使用配置好的Docker安装方式这里不讨论。理论上不同发行版命令和文件位置不一样，原理应该没区别。Docker是有人配置好的，自己不需要配，方便是方便，但是可能原Docker里的基础发行版是别人定的。</p>]]></content>
      
      
      <categories>
          
          <category> CI-CD </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何在Windows 10家庭版安装Docker for Windows</title>
      <link href="/2020/02/18/ru-he-zai-windows-10-jia-ting-ban-an-zhuang-docker-for-windows/"/>
      <url>/2020/02/18/ru-he-zai-windows-10-jia-ting-ban-an-zhuang-docker-for-windows/</url>
      
        <content type="html"><![CDATA[<p>前面写到买了台无法装Linux双系统的新电脑，预装Windows 10家庭版。因为要折腾，即使无法双系统启动原生Linux，也要想办法折腾其他方法装Linux。装了VirtualBox跑Ubuntu，也装了Linux Bash on Ubuntu On Windows 10。之前还装过Docker for Windows，没想到跑不起来，说家庭版不能跑。骂微软鸡贼，非要区分各种版本，做功能阉割。</p><p>今天偶然发现有人鼓捣出hack方法，让Docker以为是Professional版本。于是也跟着探索了一下。最后结合中外高人Blog，也鼓捣成了。</p><p>代码如下：</p><pre><code>pushd &quot;%~dp0&quot;dir /b %SystemRoot%\servicing\Packages\*Hyper-V*.mum &gt;hyper-v.txtfor /f %%i in (&#39;findstr /i . hyper-v.txt 2^&gt;nul&#39;) do dism /online /norestart /add-package:&quot;%SystemRoot%\servicing\Packages\%%i&quot;del hyper-v.txtDism /online /enable-feature /featurename:Microsoft-Hyper-V -All /LimitAccess /ALLdir /b %SystemRoot%\servicing\Packages\*containers*.mum &gt;containers.txtfor /f %%i in (&#39;findstr /i . containers.txt 2^&gt;nul&#39;) do dism /online /norestart /add-package:&quot;%SystemRoot%\servicing\Packages\%%i&quot;del containers.txtDism /online /enable-feature /featurename:Containers -All /LimitAccess /ALL%</code></pre><p>保存成一个cmd扩展名的文件，<a href="/2020/02/18/ru-he-zai-windows-10-jia-ting-ban-an-zhuang-docker-for-windows/hyperv-and-containers.cmd">鼠标右键点这里保存</a> 然后用管理员账号执行，会自动下载hyper-V和container相关组件安装。</p><p>安装完会要求重启电脑。</p><p>重启完电脑，在搜索框里敲“启用或关闭Windows功能”，抱歉我不知道在控制面板里怎么找到这项。会起一个对话框，把Hyper-V和容器相关打勾选上。</p><p>然后再修改注册表来冒充自己是专业版</p><pre><code>REG ADD &quot;HKEY_LOCAL_MACHINE\software\Microsoft\Windows NT\CurrentVersion&quot; /v EditionId /T REG_EXPAND_SZ /d Professional /F</code></pre><p>有人的电脑还要去BIOS打开Virtualization，我的默认打开了，不需要这一步。</p><p>下载Docker for Windows installer，安装，完成。</p><p><img src="/2020/02/18/ru-he-zai-windows-10-jia-ting-ban-an-zhuang-docker-for-windows/DockerOnWindows10HomeEdition.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Windows系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> Docker </tag>
            
            <tag> Hack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux的新硬件支持依然是个大坑</title>
      <link href="/2020/02/15/linux-de-xin-ying-jian-zhi-chi-yi-ran-shi-ge-da-keng/"/>
      <url>/2020/02/15/linux-de-xin-ying-jian-zhi-chi-yi-ran-shi-ge-da-keng/</url>
      
        <content type="html"><![CDATA[<p>最近需要在Linux系统上操练一些事，自己的14mid的MBP说实话并不慢，但是毕竟硬盘内存都不能放手去鼓捣，想干脆买台新电脑算了。这种专用的电脑自然没必要买笔记本，性价比不高。就随便在jd上找了一台所谓的工作站，512G SSD+1T，32G内存，一段时间内足够用了。</p><p>疫情原因，电脑送来略迟一两天。送来了，发现标配没有DP线。又下单DP线，这个倒快，第二天就送到了。</p><p>电脑自然奉送Win10家庭版。我还是要用Linux。Ubuntu，20.04 daily，还差2个月release，拿来用应该没大问题。</p><p>Windows里缩小原来的分区，给Linux留空间，然后拿U盘安装双系统，分区要选手动，结果发现只找到一个机械硬盘。这样最后grub会安装失败，系统启动不了。</p><p><img src="/2020/02/15/linux-de-xin-ying-jian-zhi-chi-yi-ran-shi-ge-da-keng/grub-failure.jpeg" alt=""></p><p>Google，发现原来NVME的SSD要改BIOS，把RAID改成AHCI。还要Windows切安全模式再切回来。</p><p>改好，顺便把BIOS再改的更顺手些，把Legacy打开，关Security Boot。</p><p>再装，在分区前出了一个对话框，提示了6个？</p><p><img src="/2020/02/15/linux-de-xin-ying-jian-zhi-chi-yi-ran-shi-ge-da-keng/questionsmark.jpeg" alt=""></p><p>再Google，发现前人已经遇到类似问题，各种技巧，启动的时候要改启动命令行，加 nvme_load=YES，改。</p><p>改了，还不行，各种Google，Dell网站上面的知识库明显是机器翻译的，矛盾，而且过时了。</p><p>最后求教Canonical的老同事，得知这个Intel SSD的RAID和Linux AHCI不兼容，暂时没有办法装双系统，如果只装Ubuntu需要gpartd格式化硬盘。</p><p>再观察一下，先拿VirtualBox顶一下，怎么说8核i7加32G内存的机器，分给VirtualBox一半也还不算弱。</p><p>只是没想到，2020年了Linux的硬件兼容性还是要提前考虑的问题！</p>]]></content>
      
      
      <categories>
          
          <category> Linux系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Hardware </tag>
            
            <tag> Compatibility </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2020/02/11/hello-world/"/>
      <url>/2020/02/11/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
